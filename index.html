<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Machine Learning Chatbot</title>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
    <style>
        body { font-family: Arial, sans-serif; }
        #chatbox { border: 1px solid #ccc; height: 300px; overflow-y: auto; padding: 10px; }
        #userInput { width: 80%; }
        button { margin-left: 10px; }
        .user-message { color: blue; }
        .bot-message { color: green; }
    </style>
</head>
<body>
    <h1>Machine Learning Chatbot</h1>
    <div id="chatbox"></div>
    <input type="text" id="userInput" placeholder="Type your message here...">
    <button onclick="sendMessage()">Send</button>

    <script>
        const chatbox = document.getElementById('chatbox');
        let model;

        const trainingData = [
            { input: "hello", output: "greeting" },
            { input: "hi", output: "greeting" },
            { input: "how are you", output: "greeting" },
            { input: "what is matrix", output: "matrix" },
            { input: "tell me about matrix multiplication", output: "matrix" },
            { input: "help", output: "help" },
            { input: "can you assist me", output: "help" },
            { input: "bye", output: "bye" },
            { input: "goodbye", output: "bye" },
            { input: "what is your name", output: "name" },
        ];

        const responses = {
            greeting: "Hello! How can I assist you today?",
            matrix: "Matrix multiplication is a mathematical operation that produces a matrix from two matrices.",
            help: "Sure! You can ask me about matrix operations or just chat!",
            bye: "Goodbye! Have a great day!",
            name: "I'm a chatbot created to assist you!"
        };

        async function createAndTrainModel() {
            const xs = tf.tensor2d(trainingData.map(data => encodeInput(data.input)), [trainingData.length, 3]);
            const ys = tf.tensor2d(trainingData.map(data => encodeOutput(data.output)), [trainingData.length, 5]);

            model = tf.sequential();
            model.add(tf.layers.dense({ units: 5, activation: 'softmax', inputShape: [3] }));
            model.compile({ optimizer: 'adam', loss: 'categoricalCrossentropy' });

            await model.fit(xs, ys, { epochs: 100 });
            console.log("Model trained!");
        }

        function encodeInput(text) {
            const words = ["hello", "hi", "how", "matrix", "tell", "help", "can", "bye", "goodbye", "what"];
            const inputVector = new Array(words.length).fill(0);
            text.split(' ').forEach(word => {
                const index = words.indexOf(word.toLowerCase());
                if (index !== -1) {
                    inputVector[index] = 1;
                }
            });
            return inputVector;
        }

        function encodeOutput(output) {
            const categories = ["greeting", "matrix", "help", "bye", "name"];
            const outputVector = new Array(categories.length).fill(0);
            const index = categories.indexOf(output);
            if (index !== -1) {
                outputVector[index] = 1;
            }
            return outputVector;
        }

        async function sendMessage() {
            const userInput = document.getElementById('userInput').value;
            if (userInput.trim() === "") return;

            displayMessage(userInput, 'user');

            const botResponse = await getBotResponse(userInput);
            displayMessage(botResponse, 'bot');

            document.getElementById('userInput').value = '';
            chatbox.scrollTop = chatbox.scrollHeight;
        }

        function displayMessage(message, sender) {
            const messageElement = document.createElement('div');
            messageElement.textContent = message;
            messageElement.className = (sender === 'user') ? 'user-message' : 'bot-message';
            chatbox.appendChild(messageElement);
        }

        async function getBotResponse(input) {
            const inputVector = tf.tensor2d([encodeInput(input)], [1, 3]);
            const prediction = model.predict(inputVector);
            const outputIndex = (await prediction.argMax(1).data())[0];

            const categories = ["greeting", "matrix", "help", "bye", "name"];
            return responses[categories[outputIndex]];
        }

        createAndTrainModel();
    </script>
</body>
</html>
